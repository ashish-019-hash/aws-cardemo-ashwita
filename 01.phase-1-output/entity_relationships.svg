<?xml version="1.0" encoding="UTF-8"?>
<svg width="1000" height="700" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .entity-box { fill: #e6f3ff; stroke: #0066cc; stroke-width: 2; }
      .entity-title { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; text-anchor: middle; }
      .entity-attr { font-family: Arial, sans-serif; font-size: 11px; text-anchor: start; }
      .relationship-line { stroke: #333; stroke-width: 2; }
      .cardinality { font-family: Arial, sans-serif; font-size: 12px; font-weight: bold; text-anchor: middle; fill: #cc0000; }
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; text-anchor: middle; }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="500" y="25" class="title">CardDemo Business Entity Relationship Diagram</text>
  
  <!-- Customer Entity -->
  <rect x="50" y="60" width="180" height="140" class="entity-box"/>
  <text x="140" y="80" class="entity-title">Customer</text>
  <text x="60" y="100" class="entity-attr">• CUST-ID (PK)</text>
  <text x="60" y="115" class="entity-attr">• CUST-FNAME</text>
  <text x="60" y="130" class="entity-attr">• CUST-LNAME</text>
  <text x="60" y="145" class="entity-attr">• CUST-ADDR-*</text>
  <text x="60" y="160" class="entity-attr">• CUST-PHONE-*</text>
  <text x="60" y="175" class="entity-attr">• CUST-SSN</text>
  <text x="60" y="190" class="entity-attr">• CUST-FICO-SCORE</text>
  
  <!-- Account Entity -->
  <rect x="320" y="60" width="180" height="140" class="entity-box"/>
  <text x="410" y="80" class="entity-title">Account</text>
  <text x="330" y="100" class="entity-attr">• ACCT-ID (PK)</text>
  <text x="330" y="115" class="entity-attr">• ACCT-ACTIVE-STATUS</text>
  <text x="330" y="130" class="entity-attr">• ACCT-CURR-BAL</text>
  <text x="330" y="145" class="entity-attr">• ACCT-CREDIT-LIMIT</text>
  <text x="330" y="160" class="entity-attr">• ACCT-CASH-LIMIT</text>
  <text x="330" y="175" class="entity-attr">• ACCT-OPEN-DATE</text>
  <text x="330" y="190" class="entity-attr">• ACCT-GROUP-ID</text>
  
  <!-- Card Entity -->
  <rect x="590" y="60" width="180" height="140" class="entity-box"/>
  <text x="680" y="80" class="entity-title">Card</text>
  <text x="600" y="100" class="entity-attr">• CARD-NUM (PK)</text>
  <text x="600" y="115" class="entity-attr">• CARD-ACCT-ID (FK)</text>
  <text x="600" y="130" class="entity-attr">• CARD-CVV-CD</text>
  <text x="600" y="145" class="entity-attr">• CARD-EMBOSSED-NAME</text>
  <text x="600" y="160" class="entity-attr">• CARD-EXPIRY-DATE</text>
  <text x="600" y="175" class="entity-attr">• CARD-ACTIVE-STATUS</text>
  
  <!-- Transaction Entity -->
  <rect x="590" y="280" width="180" height="160" class="entity-box"/>
  <text x="680" y="300" class="entity-title">Transaction</text>
  <text x="600" y="320" class="entity-attr">• TRAN-ID (PK)</text>
  <text x="600" y="335" class="entity-attr">• TRAN-CARD-NUM (FK)</text>
  <text x="600" y="350" class="entity-attr">• TRAN-TYPE-CD</text>
  <text x="600" y="365" class="entity-attr">• TRAN-CAT-CD</text>
  <text x="600" y="380" class="entity-attr">• TRAN-AMT</text>
  <text x="600" y="395" class="entity-attr">• TRAN-MERCHANT-*</text>
  <text x="600" y="410" class="entity-attr">• TRAN-ORIG-TS</text>
  <text x="600" y="425" class="entity-attr">• TRAN-PROC-TS</text>
  
  <!-- Card Cross-Reference Entity -->
  <rect x="320" y="280" width="180" height="120" class="entity-box"/>
  <text x="410" y="300" class="entity-title">Card Cross-Reference</text>
  <text x="330" y="320" class="entity-attr">• XREF-CARD-NUM (PK)</text>
  <text x="330" y="335" class="entity-attr">• XREF-CUST-ID (FK)</text>
  <text x="330" y="350" class="entity-attr">• XREF-ACCT-ID (FK)</text>
  <text x="330" y="380" class="entity-attr">Enables M:N navigation</text>
  
  <!-- User Security Entity -->
  <rect x="50" y="280" width="180" height="120" class="entity-box"/>
  <text x="140" y="300" class="entity-title">User Security</text>
  <text x="60" y="320" class="entity-attr">• SEC-USR-ID (PK)</text>
  <text x="60" y="335" class="entity-attr">• SEC-USR-FNAME</text>
  <text x="60" y="350" class="entity-attr">• SEC-USR-LNAME</text>
  <text x="60" y="365" class="entity-attr">• SEC-USR-PWD</text>
  <text x="60" y="380" class="entity-attr">• SEC-USR-TYPE</text>
  
  <!-- Relationships -->
  
  <!-- Customer to Account (1:N) -->
  <line x1="230" y1="130" x2="320" y2="130" class="relationship-line"/>
  <text x="275" y="120" class="cardinality">1</text>
  <text x="275" y="145" class="cardinality">N</text>
  
  <!-- Account to Card (1:N) -->
  <line x1="500" y1="130" x2="590" y2="130" class="relationship-line"/>
  <text x="545" y="120" class="cardinality">1</text>
  <text x="545" y="145" class="cardinality">N</text>
  
  <!-- Card to Transaction (1:N) -->
  <line x1="680" y1="200" x2="680" y2="280" class="relationship-line"/>
  <text x="665" y="240" class="cardinality">1</text>
  <text x="695" y="240" class="cardinality">N</text>
  
  <!-- Customer to Card Cross-Reference (1:N) -->
  <line x1="140" y1="200" x2="140" y2="240" class="relationship-line"/>
  <line x1="140" y1="240" x2="320" y2="240" class="relationship-line"/>
  <line x1="320" y1="240" x2="320" y2="280" class="relationship-line"/>
  <text x="230" y="230" class="cardinality">1:N</text>
  
  <!-- Account to Card Cross-Reference (1:N) -->
  <line x1="410" y1="200" x2="410" y2="280" class="relationship-line"/>
  <text x="425" y="240" class="cardinality">1:N</text>
  
  <!-- Card Cross-Reference to Card (N:1) -->
  <line x1="500" y1="340" x2="590" y2="340" class="relationship-line"/>
  <line x1="590" y1="340" x2="590" y2="200" class="relationship-line"/>
  <text x="545" y="330" class="cardinality">N:1</text>
  
  <!-- Legend -->
  <rect x="50" y="500" width="300" height="150" fill="none" stroke="#666" stroke-width="1"/>
  <text x="200" y="520" class="entity-title">Legend</text>
  <text x="60" y="540" class="entity-attr">PK = Primary Key</text>
  <text x="60" y="555" class="entity-attr">FK = Foreign Key</text>
  <text x="60" y="575" class="entity-attr">1:N = One-to-Many relationship</text>
  <text x="60" y="590" class="entity-attr">M:N = Many-to-Many relationship</text>
  <text x="60" y="610" class="entity-attr">Cross-Reference enables bidirectional navigation</text>
  <text x="60" y="625" class="entity-attr">User Security is independent authentication entity</text>
  
  <!-- Notes -->
  <text x="500" y="500" class="entity-title">Key Business Rules:</text>
  <text x="400" y="520" class="entity-attr">• Customer can have multiple Accounts (1:N)</text>
  <text x="400" y="535" class="entity-attr">• Account can have multiple Cards (1:N)</text>
  <text x="400" y="550" class="entity-attr">• Card can have multiple Transactions (1:N)</text>
  <text x="400" y="565" class="entity-attr">• Cross-Reference enables Customer-Card navigation (M:N)</text>
  <text x="400" y="580" class="entity-attr">• User Security provides system authentication</text>
  <text x="400" y="595" class="entity-attr">• VSAM files: ACCTDAT, CUSTDAT, CARDDAT, TRANSACT, USRSEC</text>
  <text x="400" y="610" class="entity-attr">• Index files: CXACAIX (Acct→Card), CCXREF (Card→Acct)</text>
</svg>
