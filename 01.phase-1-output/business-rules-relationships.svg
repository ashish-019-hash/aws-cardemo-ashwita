<?xml version="1.0" encoding="UTF-8"?>
<svg width="800" height="600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .rule-box {
        fill: #e8f4fd;
        stroke: #2563eb;
        stroke-width: 2;
        rx: 8;
      }
      .rule-title {
        font-family: Arial, sans-serif;
        font-size: 14px;
        font-weight: bold;
        fill: #1e40af;
      }
      .rule-desc {
        font-family: Arial, sans-serif;
        font-size: 11px;
        fill: #374151;
      }
      .arrow {
        stroke: #dc2626;
        stroke-width: 2;
        fill: none;
        marker-end: url(#arrowhead);
      }
      .dependency-label {
        font-family: Arial, sans-serif;
        font-size: 10px;
        fill: #dc2626;
        font-style: italic;
      }
      .independent-box {
        fill: #f0fdf4;
        stroke: #16a34a;
        stroke-width: 2;
        rx: 8;
      }
      .independent-title {
        fill: #15803d;
      }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" 
            refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#dc2626" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="400" y="30" text-anchor="middle" class="rule-title" font-size="18">
    COBOL Business Rules Dependencies
  </text>
  
  <!-- RULE-CALC-003: Transaction Amount Conversion -->
  <rect x="50" y="80" width="200" height="80" class="rule-box"/>
  <text x="150" y="100" text-anchor="middle" class="rule-title">RULE-CALC-003</text>
  <text x="150" y="115" text-anchor="middle" class="rule-desc">Transaction Amount</text>
  <text x="150" y="130" text-anchor="middle" class="rule-desc">Conversion</text>
  <text x="150" y="145" text-anchor="middle" class="rule-desc">COTRN02C.cbl</text>
  
  <!-- RULE-CALC-001: Bill Payment Balance Calculation -->
  <rect x="350" y="80" width="200" height="80" class="rule-box"/>
  <text x="450" y="100" text-anchor="middle" class="rule-title">RULE-CALC-001</text>
  <text x="450" y="115" text-anchor="middle" class="rule-desc">Bill Payment Balance</text>
  <text x="450" y="130" text-anchor="middle" class="rule-desc">Calculation</text>
  <text x="450" y="145" text-anchor="middle" class="rule-desc">COBIL00C.cbl</text>
  
  <!-- Arrow from RULE-CALC-003 to RULE-CALC-001 -->
  <line x1="250" y1="120" x2="350" y2="120" class="arrow"/>
  <text x="300" y="115" text-anchor="middle" class="dependency-label">feeds into</text>
  
  <!-- RULE-CALC-004: Date Validation -->
  <rect x="200" y="220" width="200" height="80" class="rule-box"/>
  <text x="300" y="240" text-anchor="middle" class="rule-title">RULE-CALC-004</text>
  <text x="300" y="255" text-anchor="middle" class="rule-desc">Date Validation</text>
  <text x="300" y="270" text-anchor="middle" class="rule-desc">Processing</text>
  <text x="300" y="285" text-anchor="middle" class="rule-desc">CSUTLDTC.cbl</text>
  
  <!-- Arrow from RULE-CALC-004 to transaction processing -->
  <line x1="300" y1="220" x2="300" y2="180" class="arrow"/>
  <line x1="300" y1="180" x2="150" y2="180" class="arrow"/>
  <line x1="150" y1="180" x2="150" y2="160" class="arrow"/>
  <text x="225" y="175" text-anchor="middle" class="dependency-label">validates dates for</text>
  
  <!-- RULE-CALC-002: Transaction ID Generation (Independent) -->
  <rect x="50" y="360" width="200" height="80" class="independent-box"/>
  <text x="150" y="380" text-anchor="middle" class="rule-title independent-title">RULE-CALC-002</text>
  <text x="150" y="395" text-anchor="middle" class="rule-desc">Transaction ID</text>
  <text x="150" y="410" text-anchor="middle" class="rule-desc">Generation</text>
  <text x="150" y="425" text-anchor="middle" class="rule-desc">COTRN02C.cbl</text>
  
  <!-- RULE-CALC-005: Page Number Calculation (Independent) -->
  <rect x="350" y="360" width="200" height="80" class="independent-box"/>
  <text x="450" y="380" text-anchor="middle" class="rule-title independent-title">RULE-CALC-005</text>
  <text x="450" y="395" text-anchor="middle" class="rule-desc">Page Number</text>
  <text x="450" y="410" text-anchor="middle" class="rule-desc">Calculation</text>
  <text x="450" y="425" text-anchor="middle" class="rule-desc">Multiple files</text>
  
  <!-- Legend -->
  <rect x="580" y="80" width="180" height="120" fill="none" stroke="#6b7280" stroke-width="1"/>
  <text x="670" y="100" text-anchor="middle" class="rule-title" font-size="12">Legend</text>
  
  <rect x="590" y="110" width="15" height="15" class="rule-box"/>
  <text x="615" y="122" class="rule-desc">Dependent Rules</text>
  
  <rect x="590" y="135" width="15" height="15" class="independent-box"/>
  <text x="615" y="147" class="rule-desc">Independent Rules</text>
  
  <line x1="590" y1="165" x2="610" y2="165" class="arrow"/>
  <text x="620" y="169" class="rule-desc">Data Flow</text>
  
  <!-- Summary Box -->
  <rect x="50" y="480" width="700" height="100" fill="#f9fafb" stroke="#d1d5db" stroke-width="1" rx="4"/>
  <text x="400" y="500" text-anchor="middle" class="rule-title">Business Rules Summary</text>
  <text x="70" y="520" class="rule-desc">• Transaction Amount Conversion provides numeric data for Balance Calculation</text>
  <text x="70" y="535" class="rule-desc">• Date Validation ensures transaction dates are valid before processing</text>
  <text x="70" y="550" class="rule-desc">• Transaction ID Generation and Page Number Calculation operate independently</text>
  <text x="70" y="565" class="rule-desc">• All rules focus on core business logic, excluding technical infrastructure</text>
</svg>
