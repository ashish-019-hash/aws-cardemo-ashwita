<?xml version="1.0" encoding="UTF-8"?>
<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .screen-box { fill: #e8f4fd; stroke: #2563eb; stroke-width: 2; rx: 8; }
      .menu-box { fill: #fef3c7; stroke: #d97706; stroke-width: 2; rx: 8; }
      .auth-box { fill: #dcfce7; stroke: #16a34a; stroke-width: 2; rx: 8; }
      .admin-box { fill: #fce7f3; stroke: #be185d; stroke-width: 2; rx: 8; }
      .screen-text { font-family: Arial, sans-serif; font-size: 11px; text-anchor: middle; }
      .title-text { font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; text-anchor: middle; }
      .arrow { stroke: #374151; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .pf-arrow { stroke: #7c3aed; stroke-width: 1.5; fill: none; marker-end: url(#pf-arrowhead); stroke-dasharray: 5,5; }
      .legend-text { font-family: Arial, sans-serif; font-size: 10px; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#374151" />
    </marker>
    <marker id="pf-arrowhead" markerWidth="8" markerHeight="6" refX="7" refY="3" orient="auto">
      <polygon points="0 0, 8 3, 0 6" fill="#7c3aed" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="700" y="25" class="title-text" fill="#1f2937">CardDemo COBOL Application - Screen Flow Architecture</text>
  
  <!-- Authentication Layer -->
  <rect x="600" y="50" width="200" height="60" class="auth-box"/>
  <text x="700" y="70" class="screen-text" fill="#166534">COSGN00C</text>
  <text x="700" y="85" class="screen-text" fill="#166534">Sign-On Screen</text>
  <text x="700" y="100" class="screen-text" fill="#166534">(Authentication Entry)</text>
  
  <!-- Role-based routing arrows -->
  <line x1="650" y1="110" x2="350" y2="160" class="arrow"/>
  <text x="480" y="140" class="legend-text" fill="#374151">Admin User</text>
  
  <line x1="750" y1="110" x2="1050" y2="160" class="arrow"/>
  <text x="920" y="140" class="legend-text" fill="#374151">Regular User</text>
  
  <!-- Admin Menu -->
  <rect x="250" y="170" width="200" height="80" class="admin-box"/>
  <text x="350" y="195" class="screen-text" fill="#be185d">COADM01C</text>
  <text x="350" y="210" class="screen-text" fill="#be185d">Admin Menu</text>
  <text x="350" y="225" class="screen-text" fill="#be185d">4 Options:</text>
  <text x="350" y="240" class="screen-text" fill="#be185d">User Mgmt, Reports</text>
  
  <!-- User Menu -->
  <rect x="950" y="170" width="200" height="80" class="menu-box"/>
  <text x="1050" y="195" class="screen-text" fill="#d97706">COMEN01C</text>
  <text x="1050" y="210" class="screen-text" fill="#d97706">Main Menu</text>
  <text x="1050" y="225" class="screen-text" fill="#d97706">10 Options:</text>
  <text x="1050" y="240" class="screen-text" fill="#d97706">Acct, Card, Txn, Bill</text>
  
  <!-- User Management Flow (Admin) -->
  <rect x="50" y="300" width="120" height="50" class="screen-box"/>
  <text x="110" y="320" class="screen-text" fill="#1e40af">COUSR00C</text>
  <text x="110" y="335" class="screen-text" fill="#1e40af">User List</text>
  
  <rect x="200" y="300" width="120" height="50" class="screen-box"/>
  <text x="260" y="320" class="screen-text" fill="#1e40af">COUSR01C</text>
  <text x="260" y="335" class="screen-text" fill="#1e40af">Add User</text>
  
  <rect x="350" y="300" width="120" height="50" class="screen-box"/>
  <text x="410" y="320" class="screen-text" fill="#1e40af">COUSR02C</text>
  <text x="410" y="335" class="screen-text" fill="#1e40af">Update User</text>
  
  <rect x="500" y="300" width="120" height="50" class="screen-box"/>
  <text x="560" y="320" class="screen-text" fill="#1e40af">COUSR03C</text>
  <text x="560" y="335" class="screen-text" fill="#1e40af">Delete User</text>
  
  <!-- Reports -->
  <rect x="250" y="380" width="120" height="50" class="screen-box"/>
  <text x="310" y="400" class="screen-text" fill="#1e40af">CORPT00C</text>
  <text x="310" y="415" class="screen-text" fill="#1e40af">Reports</text>
  
  <!-- Account Management Flow (User) -->
  <rect x="750" y="300" width="120" height="50" class="screen-box"/>
  <text x="810" y="320" class="screen-text" fill="#1e40af">COACTVWC</text>
  <text x="810" y="335" class="screen-text" fill="#1e40af">Account View</text>
  
  <rect x="900" y="300" width="120" height="50" class="screen-box"/>
  <text x="960" y="320" class="screen-text" fill="#1e40af">COACTUPC</text>
  <text x="960" y="335" class="screen-text" fill="#1e40af">Account Update</text>
  
  <rect x="1050" y="300" width="120" height="50" class="screen-box"/>
  <text x="1110" y="320" class="screen-text" fill="#1e40af">COBIL00C</text>
  <text x="1110" y="335" class="screen-text" fill="#1e40af">Bill Payment</text>
  
  <!-- Card Management Flow -->
  <rect x="750" y="380" width="120" height="50" class="screen-box"/>
  <text x="810" y="400" class="screen-text" fill="#1e40af">COCRDLIC</text>
  <text x="810" y="415" class="screen-text" fill="#1e40af">Card List</text>
  
  <rect x="900" y="380" width="120" height="50" class="screen-box"/>
  <text x="960" y="400" class="screen-text" fill="#1e40af">COCRDSLC</text>
  <text x="960" y="415" class="screen-text" fill="#1e40af">Card Detail</text>
  
  <rect x="1050" y="380" width="120" height="50" class="screen-box"/>
  <text x="1110" y="400" class="screen-text" fill="#1e40af">COCRDUPC</text>
  <text x="1110" y="415" class="screen-text" fill="#1e40af">Card Update</text>
  
  <!-- Transaction Management Flow -->
  <rect x="750" y="460" width="120" height="50" class="screen-box"/>
  <text x="810" y="480" class="screen-text" fill="#1e40af">COTRN00C</text>
  <text x="810" y="495" class="screen-text" fill="#1e40af">Transaction List</text>
  
  <rect x="900" y="460" width="120" height="50" class="screen-box"/>
  <text x="960" y="480" class="screen-text" fill="#1e40af">COTRN01C</text>
  <text x="960" y="495" class="screen-text" fill="#1e40af">Transaction View</text>
  
  <rect x="1050" y="460" width="120" height="50" class="screen-box"/>
  <text x="1110" y="480" class="screen-text" fill="#1e40af">COTRN02C</text>
  <text x="1110" y="495" class="screen-text" fill="#1e40af">Add Transaction</text>
  
  <!-- Navigation arrows from menus -->
  <line x1="350" y1="250" x2="110" y2="300" class="arrow"/>
  <line x1="350" y1="250" x2="310" y2="380" class="arrow"/>
  
  <line x1="1050" y1="250" x2="810" y2="300" class="arrow"/>
  <line x1="1050" y1="250" x2="810" y2="380" class="arrow"/>
  <line x1="1050" y1="250" x2="810" y2="460" class="arrow"/>
  <line x1="1050" y1="250" x2="1110" y2="300" class="arrow"/>
  
  <!-- Functional flow arrows -->
  <line x1="170" y1="325" x2="200" y2="325" class="arrow"/>
  <line x1="170" y1="325" x2="350" y2="325" class="arrow"/>
  <line x1="170" y1="325" x2="500" y2="325" class="arrow"/>
  
  <line x1="870" y1="325" x2="900" y2="325" class="arrow"/>
  <line x1="1020" y1="325" x2="1050" y2="325" class="arrow"/>
  
  <line x1="870" y1="405" x2="900" y2="405" class="arrow"/>
  <line x1="1020" y1="405" x2="1050" y2="405" class="arrow"/>
  
  <line x1="870" y1="485" x2="900" y2="485" class="arrow"/>
  <line x1="1020" y1="485" x2="1050" y2="485" class="arrow"/>
  
  <!-- PF Key Navigation Examples -->
  <line x1="260" y1="300" x2="350" y2="250" class="pf-arrow"/>
  <text x="300" y="270" class="legend-text" fill="#7c3aed">PF3</text>
  
  <line x1="810" y1="300" x2="1050" y2="250" class="pf-arrow"/>
  <text x="920" y="270" class="legend-text" fill="#7c3aed">PF3</text>
  
  <!-- Legend -->
  <rect x="50" y="550" width="300" height="180" fill="#f9fafb" stroke="#d1d5db" stroke-width="1" rx="4"/>
  <text x="200" y="570" class="title-text" fill="#1f2937">Navigation Legend</text>
  
  <rect x="70" y="580" width="20" height="15" class="auth-box"/>
  <text x="100" y="592" class="legend-text" fill="#374151">Authentication Entry Point</text>
  
  <rect x="70" y="600" width="20" height="15" class="admin-box"/>
  <text x="100" y="612" class="legend-text" fill="#374151">Admin Functions</text>
  
  <rect x="70" y="620" width="20" height="15" class="menu-box"/>
  <text x="100" y="632" class="legend-text" fill="#374151">User Menu</text>
  
  <rect x="70" y="640" width="20" height="15" class="screen-box"/>
  <text x="100" y="652" class="legend-text" fill="#374151">Functional Screens</text>
  
  <line x1="70" y1="665" x2="90" y2="665" class="arrow"/>
  <text x="100" y="670" class="legend-text" fill="#374151">CICS XCTL Transfer</text>
  
  <line x1="70" y1="685" x2="90" y2="685" class="pf-arrow"/>
  <text x="100" y="690" class="legend-text" fill="#374151">PF Key Navigation</text>
  
  <text x="70" y="710" class="legend-text" fill="#374151">Standard PF Keys:</text>
  <text x="70" y="725" class="legend-text" fill="#374151">PF3=Exit, PF4=Clear, PF5=Action, PF7/8=Page</text>
  
  <!-- Key Features Box -->
  <rect x="400" y="550" width="350" height="180" fill="#f0f9ff" stroke="#0ea5e9" stroke-width="1" rx="4"/>
  <text x="575" y="570" class="title-text" fill="#0c4a6e">Key Architecture Features</text>
  
  <text x="420" y="590" class="legend-text" fill="#0c4a6e">• Role-based authentication routing</text>
  <text x="420" y="605" class="legend-text" fill="#0c4a6e">• Dynamic menu option loading via arrays</text>
  <text x="420" y="620" class="legend-text" fill="#0c4a6e">• CARDDEMO-COMMAREA context passing</text>
  <text x="420" y="635" class="legend-text" fill="#0c4a6e">• Standardized PF key navigation</text>
  <text x="420" y="650" class="legend-text" fill="#0c4a6e">• Pseudo-conversational CICS design</text>
  <text x="420" y="665" class="legend-text" fill="#0c4a6e">• BMS map-based screen interaction</text>
  <text x="420" y="680" class="legend-text" fill="#0c4a6e">• VSAM file integration for data persistence</text>
  <text x="420" y="695" class="legend-text" fill="#0c4a6e">• Comprehensive validation and error handling</text>
  <text x="420" y="710" class="legend-text" fill="#0c4a6e">• List screens with pagination support</text>
  
  <!-- Program Count -->
  <rect x="800" y="550" width="250" height="100" fill="#fef7ed" stroke="#ea580c" stroke-width="1" rx="4"/>
  <text x="925" y="570" class="title-text" fill="#9a3412">Analysis Coverage</text>
  <text x="820" y="590" class="legend-text" fill="#9a3412">Total Programs Analyzed: 18</text>
  <text x="820" y="605" class="legend-text" fill="#9a3412">Authentication: 1 program</text>
  <text x="820" y="620" class="legend-text" fill="#9a3412">Menu Navigation: 2 programs</text>
  <text x="820" y="635" class="legend-text" fill="#9a3412">Functional Screens: 15 programs</text>
  
  <!-- Flow Types -->
  <rect x="1100" y="550" width="250" height="180" fill="#f0fdf4" stroke="#22c55e" stroke-width="1" rx="4"/>
  <text x="1225" y="570" class="title-text" fill="#15803d">Screen Flow Types</text>
  
  <text x="1120" y="590" class="legend-text" fill="#15803d">Authentication Flow:</text>
  <text x="1120" y="605" class="legend-text" fill="#15803d">COSGN00C → Role Routing</text>
  
  <text x="1120" y="625" class="legend-text" fill="#15803d">Account Management:</text>
  <text x="1120" y="640" class="legend-text" fill="#15803d">View ↔ Update ↔ Billing</text>
  
  <text x="1120" y="660" class="legend-text" fill="#15803d">Card Operations:</text>
  <text x="1120" y="675" class="legend-text" fill="#15803d">List → Detail ↔ Update</text>
  
  <text x="1120" y="695" class="legend-text" fill="#15803d">Transaction Processing:</text>
  <text x="1120" y="710" class="legend-text" fill="#15803d">List → View ↔ Add</text>
  
  <!-- Footer -->
  <text x="700" y="780" class="legend-text" fill="#6b7280" text-anchor="middle">CardDemo COBOL Application - Complete Business-Level Screen Navigation Architecture</text>
  <text x="700" y="795" class="legend-text" fill="#6b7280" text-anchor="middle">Focus: Production User-Facing Flows | Excludes: Internal Logic, Test/Debug Screens</text>
</svg>
